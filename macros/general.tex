% !TEX root=../main.tex

\input macros/auxiliaries


%% Text %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newmacro{alert}[1]
  {\textbf{#1}}
\newmacro{enquote}[1]
  {``#1''}
\newmacro{grayed}[1]
  {\textcolor{gray}{#1}}
\newmacro{todo}[1]
  {\ensuremath{\star}\marginnote{\ensuremath{\star} #1}}


%% Lists %%
%% NOTE: requires `paralist`

%% Use compact lists by default
\renewenvironment{itemize}
  {\begin{compactitem}}
  {\end{compactitem}}
\renewenvironment{enumerate}
  {\begin{compactenum}}
  {\end{compactenum}}
\renewenvironment{description}
  {\begin{compactdesc}}
  {\end{compactdesc}}
%% Define starred versions as in-paragraph-lists
\newenvironment{itemize*}
  {\begin{inparaitem}}
  {\end{inparaitem}}
\newenvironment{enumerate*}[1][(i)]
  {\begin{inparaenum}[#1]}
  {\end{inparaenum}}
\newenvironment{description*}
  {\begin{inparadesc}}
  {\end{inparadesc}}


%% Blocks %%

\newenvironment{block}
  {\begin{center}}
  {\end{center}}


%% Column types %%
%% NOTE: requires `array`

\newcolumntype{L}{>{$}l<{$}}
\newcolumntype{C}{>{$}c<{$}}
\newcolumntype{R}{>{$}r<{$}}
\newcolumntype{T}{>{\ttfamily}l}
\newcolumntype{S}{>{\sffamily}l}


%% References %%
%% NOTE: requires `cleveref`

\let\see\cref
\let\See\Cref
\let\at\cpageref


%% Citations %%
%% NOTE: requires `natbib`

\let\cite\citep
\let\textcite\citet


%% Abbreviations %%

%% \newabbreviation[.name.]{.text.}{.full.}
\newmacro{newabbreviation}[3][1]
  {\ifthenelse{\isempty{#1}}
     %%FIXME: something with \uppercase and \csname...
     {\newabbreviationaux{\uppercase{#2}}{\lowercase{#2}}{#3}}
     {\newabbreviationaux{#1}{\lowercase{#2}}{#3}}}
\newmacro{newabbreviationaux}[3]
  {\newmacro{#1}{\smallcaps{#2}}
   \newmacro{infull#1}{#3}}

\newmacro{infull}[1]
  {\usemacro{infull#1}}


%% Math %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Symbols %%

%% NOTE: change this to \emptyset when using a font that includes a nice standard emptyset
\let\nothing\varnothing


%% Braces %%

\let\<\langle
\let\>\rangle

\newmathcommand{llbrace}[open] {\{\!|}
\newmathcommand{rrbrace}[close]{|\!\}}


%% Operators %%

\let\lt<
\let\gt>

\newmathcommand{append}[bin]
  {+\!\!+}


%% Shortcuts %%

\newmathcommand{powerset}[cal]{P}

\newmathcommand{NN}  [bb]{N}
\newmathcommand{ZZ}  [bb]{Z}
\newmathcommand{RR}  [bb]{R}
\newmathcommand{CC}  [bb]{C}

\newmathcommand{LL}  [bb]{L}
\newmathcommand{UU}  [bb]{U}
\newmathcommand{BB}  [bb]{B}
\renewmathcommand{SS}[bb]{S}

\let\to\rightarrow
\let\implies\Rightarrow
\let\infers\vdash


%% Comments %%

\newmacro{comment}[1]
  {\quad\text{\{ #1 \}}}


%% Environments %%

\newenvironment*{marginequation}[1][0pt]
  {\begin{marginfigure}[#1]\equation}
  {\endequation\end{marginfigure}}

\newenvironment*{marginequation*}[1][0pt]
  {\begin{marginfigure}[#1]\equation\nonumber}
  {\endequation\end{marginfigure}}

\newenvironment*{grammar}
  %%NOTE: the `@{}` suppreses `\tabcolsep` before the first column
  {\begin{block}\begin{tabular}{@{}rRCLl}}
  {\end{tabular}\end{block}}
